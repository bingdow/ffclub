{% extends "base.html" %}

{% block base_css %}
  {{ css('event') }}
{% endblock %}

{% block content %}
  <h3>
    您可以立即上傳推廣相片與大家分享，並欣賞每個人的作品！
  </h3>

  {% if request.user.is_active %}
    <p>{{ _('You are logged in as {username}')|f(username=request.user) }}.
      <a href="{{ url('intro.logout') }}">{{ _('Log out') }}</a></p>
      <form enctype="multipart/form-data" method="post" action="">
        {{ csrf() }}
        {{ upload_form }}
          <input type="submit" value="我要上傳">
      </form>
  {% else %}
    <p><a id="browserid" href="#">{{ _('Log in with BrowserID') }}</a></p>
    <form method="POST" action="{{ url('browserid_verify') }}">
      {{ csrf() }}
      {{ browserid_form.as_p() }}
        <input type="hidden" name="next" value="{{ url('event.wall') }}">
    </form>
  {% endif %}
  <div class="eventWall">
    <ul class="eventPhotos">
      {% if event_photos|length == 0 %}
        <p>目前没有任何照片分享</p>
      {% else %}
        {% for event_photo in event_photos %}
          <li class="eventPhoto">
          <a class="eventPhotoLink" href="/static/{{ event_photo.image_large }}" title="{{ event_photo.description }}">
            <img data-full-width="{{ event_photo.image_large_width }}" data-full-height="{{ event_photo.image_large_height }}"
                 width="300" height="{{ event_photo.image_medium_height / event_photo.image_medium_width * 300 }}"
                 src="/static/{{ event_photo.image_medium }}"
                 alt="{{ event_photo.description }}" title="{{ event_photo.description }}"/>
          </a>
            <p>{{ event_photo.description }}</p>
            <p><span class="time" title="{{ event_photo.create_time }}"></span> by {{ event_photo.create_user }}</p>

          </li>
        {% endfor %}
      {% endif %}
    </ul>
  </div>
{% endblock %}
{% block base_js %}
  {{ js('event') }}
  {% if not request.user.is_active %}
    {{ browserid_form.media }}
  {% endif %}
{% endblock %}
